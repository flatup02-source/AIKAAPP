# n8nを使った格闘技GYM経営の自動化案

## 概要
個人事業主の格闘技GYM経営者向けに、n8n（ワークフロー自動化ツール）を活用した業務効率化の提案です。

## 実装可能な自動化ワークフロー

### 1. 会員管理の自動化

#### 1.1 新規会員登録時の自動ウェルカムフロー
**トリガー**: Googleスプレッドシートに新規会員が追加された時
**ワークフロー**:
- Googleスプレッドシート → n8n Webhook
- LINE Messaging APIでウェルカムメッセージ送信
- Firebaseに会員情報を保存
- 初回レッスン予約の案内を自動送信

**メリット**:
- 手動での挨拶が不要
- 24時間対応可能
- 一貫した顧客体験を提供

#### 1.2 会費請求の自動化
**トリガー**: 毎月1日（Cron）
**ワークフロー**:
- Googleスプレッドシートから会員リストを取得
- 各会員の会費を計算
- Stripe/PayPalで自動請求
- 請求書を自動生成してメール送信
- 支払い状況をスプレッドシートに記録

**メリット**:
- 請求漏れの防止
- 時間の大幅削減
- 支払い状況の可視化

#### 1.3 会費未払いリマインダー
**トリガー**: 会費支払い期限の3日前、1日前
**ワークフロー**:
- スプレッドシートから未払い会員を抽出
- LINE/メールでリマインダー送信
- 期限超過後は自動的に一時停止処理

### 2. 予約システムの自動化

#### 2.1 レッスン予約の自動確認
**トリガー**: レッスン前日・当日の朝
**ワークフロー**:
- Googleカレンダーから翌日のレッスンを取得
- 予約者リストを取得
- LINE/メールでリマインダー送信
- キャンセル待ちの会員に空き情報を通知

**メリット**:
- キャンセルによる機会損失の削減
- 会員の満足度向上

#### 2.2 満員時の自動待機リスト管理
**トリガー**: レッスンが満員になった時
**ワークフロー**:
- 予約システムから満員情報を取得
- 待機リストに追加
- キャンセルが出たら自動で通知

### 3. マーケティングの自動化

#### 3.1 SNS投稿の自動化
**トリガー**: 毎週決まった曜日・時間
**ワークフロー**:
- スプレッドシートから投稿内容を取得
- X（Twitter）/Instagramに自動投稿
- 投稿結果をログに記録

**メリット**:
- 定期的な発信で認知度向上
- 投稿忘れの防止

#### 3.2 会員向けニュースレター配信
**トリガー**: 毎週/毎月の決まった日
**ワークフロー**:
- スプレッドシートから会員リストを取得
- メールテンプレートに情報を挿入
- 一括メール送信
- 開封率・クリック率を記録

#### 3.3 イベント告知の自動配信
**トリガー**: イベント開催日の2週間前、1週間前、3日前
**ワークフロー**:
- Googleカレンダーからイベント情報を取得
- LINE/メールで告知
- 参加申し込みの受付開始

### 4. 業務効率化

#### 4.1 売上レポートの自動生成
**トリガー**: 毎月1日（前月の集計）
**ワークフロー**:
- スプレッドシートから売上データを集計
- グラフ・チャートを自動生成
- PDFレポートを作成
- メールで送信（またはGoogle Driveに保存）

**メリット**:
- 経営判断の迅速化
- 税務処理の効率化

#### 4.2 在庫管理の自動化（サプリメント・グッズ）
**トリガー**: 在庫が一定数以下になった時
**ワークフロー**:
- スプレッドシートから在庫数を監視
- 在庫が少なくなったら自動で発注メール送信
- 入荷予定日をカレンダーに追加

#### 4.3 動画分析結果の自動処理
**トリガー**: 動画アップロード完了時（既存のvideo-processing-trigger.jsと連携）
**ワークフロー**:
- 動画分析結果を取得
- 会員のスプレッドシートに分析結果を記録
- 改善点を自動で抽出
- 会員にフィードバックを送信

### 5. 顧客サポートの自動化

#### 5.1 よくある質問の自動応答
**トリガー**: LINE/メールでの問い合わせ
**ワークフロー**:
- 問い合わせ内容をAIで分析（OpenAI APIなど）
- よくある質問とマッチング
- 自動で回答を送信
- 解決しない場合は担当者に転送

#### 5.2 問い合わせの自動分類・転送
**トリガー**: 問い合わせ受信時
**ワークフロー**:
- 問い合わせ内容を分析
- カテゴリ別に分類（予約、会費、その他）
- 適切な担当者に転送
- スプレッドシートに記録

### 6. 会員エンゲージメント向上

#### 6.1 長期未訪問会員へのリエンゲージメント
**トリガー**: 30日以上来店していない会員を検出
**ワークフロー**:
- スプレッドシートから未訪問会員を抽出
- パーソナライズされたメッセージを送信
- 特別オファーを提示
- 来店を促す

#### 6.2 会員の誕生日お祝い
**トリガー**: 会員の誕生日当日
**ワークフロー**:
- スプレッドシートから誕生日情報を取得
- お祝いメッセージを送信
- 特別クーポンを付与

## 実装方法

### n8nのセットアップ

#### オプション1: n8n Cloud（推奨）
- 最も簡単な方法
- 月額料金がかかるが、メンテナンス不要
- URL: https://n8n.io/cloud

#### オプション2: セルフホスティング（Docker）
```yaml
# docker-compose.yml
version: '3.8'
services:
  n8n:
    image: n8nio/n8n
    ports:
      - "5678:5678"
    environment:
      - N8N_BASIC_AUTH_ACTIVE=true
      - N8N_BASIC_AUTH_USER=admin
      - N8N_BASIC_AUTH_PASSWORD=your-secure-password
    volumes:
      - n8n_data:/home/node/.n8n
volumes:
  n8n_data:
```

### 必要な連携サービス

1. **Googleスプレッドシート**: 会員管理、予約管理
2. **LINE Messaging API**: 会員への通知
3. **Firebase**: データベース
4. **Googleカレンダー**: レッスンスケジュール管理
5. **メールサービス**: SendGrid、Mailgunなど
6. **決済サービス**: Stripe、PayPalなど（会費自動請求用）

### 現在のプロジェクトとの統合

既存のプロジェクトには以下が実装済み：
- Firebase認証（LINE認証統合済み）
- Googleスプレッドシート連携
- 動画分析機能

n8nを追加することで：
- スプレッドシートへの書き込みをトリガーに自動処理を実行
- Firebaseのデータ変更を監視して自動アクションを実行
- 動画分析結果を自動で会員にフィードバック

## 実装の優先順位

### フェーズ1（即効性が高い）
1. 会費請求の自動化
2. レッスン予約のリマインダー
3. 新規会員のウェルカムメッセージ

### フェーズ2（中期的な効果）
4. 売上レポートの自動生成
5. SNS投稿の自動化
6. 在庫管理の自動化

### フェーズ3（長期的な効果）
7. 顧客サポートの自動化
8. 会員エンゲージメント向上施策

## コスト試算

- **n8n Cloud**: 月額$20〜（基本プラン）
- **LINE Messaging API**: 無料（メッセージ数に応じて課金）
- **SendGrid**: 月額$15〜（メール送信）
- **その他**: 既存サービスを活用

**合計**: 月額約$35〜（約5,000円〜）

## 期待される効果

- **時間削減**: 月20時間以上の業務時間削減
- **収益向上**: 会費請求漏れの防止、キャンセル待ちの活用
- **顧客満足度向上**: 迅速な対応、パーソナライズされたサービス
- **経営の可視化**: データに基づいた意思決定

## 次のステップ

1. n8nのセットアップ（Cloudまたはセルフホスティング）
2. 既存のスプレッドシート構造を確認
3. 最初のワークフロー（会費請求の自動化）を実装
4. 段階的に他のワークフローを追加
