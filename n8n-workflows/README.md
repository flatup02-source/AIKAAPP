# n8nワークフローの使い方

## ワークフローのインポート方法

1. n8nのダッシュボードにログイン
2. 左上の「+」ボタンをクリックして新しいワークフローを作成
3. 右上の「⋮」メニューから「Import from File」を選択
4. 以下のJSONファイルをインポート：
   - `payment-reminder-workflow.json` - 会費請求リマインダー
   - `lesson-reminder-workflow.json` - レッスンリマインダー
   - `new-member-welcome-workflow.json` - 新規会員ウェルカムフロー

## 必要な環境変数の設定

n8nの環境変数に以下を設定してください：

```
GOOGLE_SHEET_ID=あなたのスプレッドシートID
SITE_URL=https://serene-zabaione-8c4e2a.netlify.app
N8N_WEBHOOK_SECRET=あなたのシークレットキー（任意）
```

## スプレッドシートの構造

### 会員管理シート
| 列A | 列B | 列C | 列D | 列E | 列F |
|-----|-----|-----|-----|-----|-----|
| 登録日 | ユーザーID | 氏名 | メール | LINE ID | 会員タイプ |

### レッスン予約シート
| 列A | 列B | 列C | 列D | 列E | 列F | 列G |
|-----|-----|-----|-----|-----|-----|-----|
| ユーザーID | 氏名 | 日付 | 時間 | レッスン名 | メール | LINE ID |

## ワークフローのカスタマイズ

各ワークフローは、あなたのGYMのニーズに合わせてカスタマイズできます：

1. **Cron式の変更**: 実行タイミングを変更
2. **メッセージのカスタマイズ**: LINEメッセージやメールの内容を変更
3. **条件の追加**: 特定の条件に基づいて処理を分岐

## トラブルシューティング

### エラー: Google Sheets認証エラー
- Googleサービスアカウントの認証情報を確認
- スプレッドシートへのアクセス権限を確認

### エラー: Webhook認証エラー
- `N8N_WEBHOOK_SECRET`が正しく設定されているか確認
- WebhookエンドポイントのURLが正しいか確認

### エラー: LINE Messaging APIエラー
- LINE Messaging APIの認証情報を確認
- チャネルアクセストークンが有効か確認

## 次のステップ

1. 基本的なワークフローをテスト実行
2. 実際のデータで動作確認
3. 必要に応じてカスタマイズ
4. 他のワークフローも段階的に追加
